function goTo(targetX, targetZ)
    local currentX, currentY, currentZ = gps.locate(5)
    if not currentX then
        print("GPS not available. Make sure you're in range of a GPS satellite network.")
        return
    else
        print("Current position: X=" .. currentX .. ", Y=" .. currentY .. ", Z=" .. currentZ)
    end

    -- Align to the correct orientation for X movement
    while currentX ~= targetX do
        if currentX < targetX then
            while not facing("east") do
                turtle.turnRight()
                print("Turning to face east.")
            end
        elseif currentX > targetX then
            while not facing("west") do
                turtle.turnRight()
                print("Turning to face west.")
            end
        end
        if not turtle.forward() then
            turtle.dig()
            print("Obstacle detected, digging...")
        else
            print("Moving to X=" .. currentX)
        end
        currentX, _, _ = gps.locate(5)
    end

    -- Align to the correct orientation for Z movement
    while currentZ ~= targetZ do
        if currentZ < targetZ then
            while not facing("south") do
                turtle.turnRight()
                print("Turning to face south.")
            end
        elseif currentZ > targetZ then
            while not facing("north") do
                turtle.turnRight()
                print("Turning to face north.")
            end
        end
        if not turtle.forward() then
            turtle.dig()
            print("Obstacle detected, digging...")
        else
            print("Moving to Z=" .. currentZ)
        end
        _, _, currentZ = gps.locate(5)
    end

    -- Ensure the turtle faces north
    while not facing("north") do
        turtle.turnRight()
        print("Turning right to find north...")
    end
    print("Now facing north.")
end

-- Function to check the turtle's facing direction
function facing(direction)
    local _, orientation = gps.locate(5)
    return ({["north"]=0, ["east"]=1, ["south"]=2, ["west"]=3})[direction] == orientation
end

-- Call the goTo function with your coordinates
goTo(-337, -16)
